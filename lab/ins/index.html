<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="images/avt.jpg" type="image/x-icon">
    <link rel="stylesheet" href="css/main.css">
    <title>有你们的加入，未来可期</title>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            /* background: rgba(119, 17, 85, 0.5); */
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center
        }
    </style>
</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/css-doodle/0.6.1/css-doodle.min.js"></script>
    <style>
        css-doodle {
            --color: @p(#51eaea, #fffde1, #ff9d76, #FB3569);

            --rule: ( :doodle {
                    @grid: 30x1 / 18vmin;
                    --deg: @p(-180deg, 180deg);
                }

                :container {
                    perspective: 30vmin;
                }

                :after, :before {
                    content: '';
                    background: var(--color);
                    @place-cell: @r(100%) @r(100%);
                    @size: @r(6px);
                    @shape: heart;
                }

                @place-cell: center;
                @size: 100%;

                box-shadow: @m(2, (0 0 50px var(--color)));
                background: @m(100, (radial-gradient(var(--color) 50%, transparent 0) @r(-20%, 120%) @r(-20%, 100%) / 1px 1px no-repeat));

                will-change: transform, opacity;
                animation: scale-up 12s linear infinite;
                animation-delay: calc(-12s / @size() * @i());

                @keyframes scale-up {
                    0%, 95.01%, 100% {
                        transform: translateZ(0) rotate(0);
                        opacity: 0;
                    }

                    10% {
                        opacity: 1;
                    }

                    95% {
                        transform: translateZ(35vmin) rotateZ(@var(--deg));
                    }
                }

            )
        }
    </style>

    <css-doodle use="var(--rule)"></css-doodle>
    <div class="counter">
        <div class="nums">
            <span class="in">5</span>
            <span>4</span>
            <span>3</span>
            <span>2</span>
            <span>1</span>
        </div>
    </div>
</body>
<script>
    const nums = document.querySelectorAll('.nums span');
    const counter = document.querySelector('.counter');
    runAnimation();

    function runAnimation() {
        nums.forEach((num, idx) => {
            const penultimate = nums.length - 1;
            num.addEventListener('animationend', (e) => {
                if (e.animationName === 'goIn' && idx !== penultimate) {
                    num.classList.remove('in');
                    num.classList.add('out');
                } else if (e.animationName === 'goOut' && num.nextElementSibling) {
                    num.nextElementSibling.classList.add('in');
                } else {
                    counter.classList.add('hide');
                    setTimeout(function () {
                        location.href = 'content.html';
                    }, 500)
                }
            });
        });
    }
    //背景循环切换
    // var col = ['yellow', '#270F34', 'white'];
    // var x = 0;

    // function changeColor() {
    //     x++;
    //     x = x % 3; //超过2则取余数，保证循环在0、1、2之间
    //     document.getElementById("mainBody").style.background = col[x];
    // }
    // setInterval("changeColor()", 3000);
</script>

</html>